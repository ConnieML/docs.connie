<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-feature-library/callback-and-voicemail" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">callback-and-voicemail | Connie Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.connie.one/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://docs.connie.one/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://docs.connie.one/feature-library/callback-and-voicemail"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="callback-and-voicemail | Connie Documentation"><meta data-rh="true" name="description" content="This feature enables the creation of callbacks and voicemails as custom task types - by means of a Serverless Functions API. It also provides the UI to handle these special types of task in Flex - by means of Flex Plugin components. It is a generic reference implementation intended to be customized to meet the needs of any particular use case, and ultimately accelerate the development of callback and voicemail functionality - both on the the front end (Flex), and in the IVR (e.g. Studio)."><meta data-rh="true" property="og:description" content="This feature enables the creation of callbacks and voicemails as custom task types - by means of a Serverless Functions API. It also provides the UI to handle these special types of task in Flex - by means of Flex Plugin components. It is a generic reference implementation intended to be customized to meet the needs of any particular use case, and ultimately accelerate the development of callback and voicemail functionality - both on the the front end (Flex), and in the IVR (e.g. Studio)."><link data-rh="true" rel="icon" href="/img/logos/connie-rtc-icon.png"><link data-rh="true" rel="canonical" href="https://docs.connie.one/feature-library/callback-and-voicemail"><link data-rh="true" rel="alternate" href="https://docs.connie.one/feature-library/callback-and-voicemail" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.connie.one/feature-library/callback-and-voicemail" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"callback-and-voicemail","item":"https://docs.connie.one/feature-library/callback-and-voicemail"}]}</script><link rel="stylesheet" href="https://assets.twilio.com/public_assets/paste-fonts/1.5.1/fonts.css"><link rel="stylesheet" href="/assets/css/styles.a19a050f.css">
<script src="/assets/js/runtime~main.6b0d0809.js" defer="defer"></script>
<script src="/assets/js/main.ddeef250.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logos/connie-rtc-icon.png" alt="Connie Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logos/connie-rtc-icon.png" alt="Connie Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Connie Documentation</b></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/ConnieML/connieRTC-flex" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/getting-started/install-template">Getting started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/feature-library/overview">Feature library</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/feature-library/overview">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/feature-library/activity-reservation-handler">activity-reservation-handler</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/feature-library/activity-skill-filter">activity-skill-filter</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/feature-library/admin-ui">admin-ui</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/feature-library/agent-automation">agent-automation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/feature-library/attribute-viewer">attribute-viewer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/feature-library/branding">branding</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/feature-library/callback-and-voicemail-with-email">Callback and Voicemail with Email Notifications</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/feature-library/callback-and-voicemail">callback-and-voicemail</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/feature-library/caller-id">caller-id</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/feature-library/canned-responses">canned-responses</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/feature-library/chat-to-video-escalation">chat-to-video</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/feature-library/chat-transfer">chat-transfer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/feature-library/conditional-recording">conditional-recording</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/feature-library/conference">conference</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/feature-library/contacts">contacts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/feature-library/conversation-transfer">conversation-transfer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/feature-library/custom-hold-music">custom-hold-music</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/feature-library/custom-transfer-directory">custom-transfer-directory</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/feature-library/datadog-log-integration">datadog-log-integration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/feature-library/device-manager">device-manager</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/feature-library/dispositions">dispositions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/feature-library/dual-channel-recording">dual-channel-recording</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/feature-library/emoji-picker">emoji-picker</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/feature-library/enhanced-crm-container">enhanced-crm-container</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/feature-library/force-conference-region">force-conference-region</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/feature-library/hang-up-by">hang-up-by</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/feature-library/inline-media">inline-media</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/feature-library/internal-call">internal-call</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/feature-library/keyboard-shortcuts">keyboard-shortcuts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/feature-library/localization">localization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/feature-library/metrics-data-tiles">metrics-data-tiles</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/feature-library/multi-call">multi-call</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/feature-library/omni-channel-capacity-management">omni-channel-capacity-management</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/feature-library/park-interaction">park-interaction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/feature-library/pause-recording">pause-recording</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/feature-library/queues-stats-metrics">queues-stats-metrics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/feature-library/ring-notification">ring-notification</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/feature-library/schedule-manager">schedule-manager</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/feature-library/scrollable-activities">scrollable-activities</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/feature-library/send-audio-rec-file">send-audio-rec-file</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/feature-library/sip-support">sip-support</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/feature-library/supervisor-barge-coach">supervisor-barge-coach</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/feature-library/supervisor-capacity">supervisor-capacity</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/feature-library/supervisor-complete-reservation">supervisor-complete-reservation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/feature-library/teams-view-enhancements">teams-view-enhancements</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/feature-library/teams-view-filters">teams-view-filters</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/feature-library/worker-canvas-tabs">worker-canvas-tabs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/feature-library/worker-details">worker-details</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/developers/getting-started">Developers</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/end-users/cbo-admins/getting-started">End Users</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Feature library</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">callback-and-voicemail</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>callback-and-voicemail</h1></header><p>This feature enables the creation of callbacks and voicemails as custom task types - by means of a Serverless Functions API. It also provides the UI to handle these special types of task in Flex - by means of Flex Plugin components. It is a generic reference implementation intended to be customized to meet the needs of any particular use case, and ultimately accelerate the development of callback and voicemail functionality - both on the the front end (Flex), and in the IVR (e.g. Studio).</p>
<p>The feature is inspired by the work in the <a href="https://www.twilio.com/docs/flex/solutions-library/queued-callback-and-voicemail" target="_blank" rel="noopener noreferrer">Queued Callback and Voicemail</a> Twilio Solution Library, however it has a few key aspects that it improves upon:</p>
<ul>
<li>Callbacks and voicemails are placed on the &#x27;voice&#x27; channel by default, as it&#x27;s standard for such work to be threaded in single file with voice calls (i.e. an agent would not want to be handling any of these tasks concurrently with actual voice call tasks). NOTE: The Serverless Functions API we&#x27;ve exposed does allow the task channel to be overridden if desired.</li>
<li>There is a Serverless Functions API for creating the callback or voicemail, so you just have to create your UX and then decide when and where to create the callback. No need to peel apart the sample solution for the task creation logic.</li>
<li><a href="https://github.com/twilio-professional-services/flex-project-template/blob/main/serverless-functions/src/functions/features/callback-and-voicemail/studio/create-callback.protected.js" target="_blank" rel="noopener noreferrer">Creating a callback or voicemail</a> has a little more resiliency built in as it uses a retry handler provided by our common wrappers provided by this template. Maximum retry attempts are configurable under this framework.</li>
<li>Callbacks and voicemails use a shared set of components and functions, as voicemails are effectively callbacks with a voicemail recording (and possibly a transcription) attached.</li>
<li>The callback or voicemail task can be automatically selected after the outbound call back to the contact ends, allowing for a smoother call wrapup process.</li>
<li>A robust wait experience (aka <code>waitUrl</code> endpoint) is provided - which uses a more robust Task API query to find the task associated with the Call SID. This addresses the documented scalability issue of the solution library approach - which uses <code>EvaluateTaskAttributes</code> for getting the pending task SID (an API that&#x27;s strictly rate limited to 3 requests per second).</li>
<li>Voicemail retrieval works with recording media HTTP authentication enabled or disabled</li>
<li>In-queue callback and voicemail requests keep their place in line by using the original task&#x27;s start time for the callback request</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="flex-user-experience">Flex User Experience<a href="#flex-user-experience" class="hash-link" aria-label="Direct link to Flex User Experience" title="Direct link to Flex User Experience">​</a></h2>
<p>The vanilla feature without any further customizations will look like this for callbacks</p>
<p><img decoding="async" loading="lazy" alt="alt text" src="/assets/images/flex-user-experience-c7a981f14bfa4e96545a4138fc1d1ee7.gif" width="1116" height="893" class="img_ev3q"></p>
<p>Voicemails will look like this</p>
<p><img decoding="async" loading="lazy" alt="alt text" src="/assets/images/flex-user-experience-vm-6fd9b13e787c44a5ceb7194a20549f69.gif" width="1185" height="978" class="img_ev3q"></p>
<p>And Voicemails created from the Transcription Callback URL will look like this</p>
<p><img decoding="async" loading="lazy" alt="alt text" src="/assets/images/flex-user-experience-vm-with-trans-81da0afd0741b7cd3344ad9816a8d534.gif" width="1112" height="668" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-does-it-work">How Does it Work?<a href="#how-does-it-work" class="hash-link" aria-label="Direct link to How Does it Work?" title="Direct link to How Does it Work?">​</a></h2>
<p>The feature works by registering custom Flex Channels for callbacks and voicemails. These channels are a presentation only layer, on top of the TaskRouter Task Channel, which remains &#x27;voice&#x27;.</p>
<p>When the channel is registered, it renders custom components based on the task attribute; <em>taskType: callback</em> or <em>taskType: voicemail</em></p>
<p>There are assorted serverless functions for creating a callback, re-queueing a callback, and for orchestrating a wait experience that offers an in-queue callback option.</p>
<p>When retrieving voicemail, the <code>fetch-voicemail</code> function is invoked. This fetches the recording media using HTTP authentication and returns it base64-encoded to Flex UI.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="setup-and-dependencies">Setup and Dependencies<a href="#setup-and-dependencies" class="hash-link" aria-label="Direct link to Setup and Dependencies" title="Direct link to Setup and Dependencies">​</a></h2>
<p>Once you&#x27;ve set the flag for the feature in flex-config, and all of that is deployed, you now have a functioning callback and voicemail feature! Now you just need to create some callbacks and/or voicemails via Studio or TwiML.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="creating-a-callback-task-using-the-create-callback-function">Creating a Callback Task Using the <em>create-callback</em> Function<a href="#creating-a-callback-task-using-the-create-callback-function" class="hash-link" aria-label="Direct link to creating-a-callback-task-using-the-create-callback-function" title="Direct link to creating-a-callback-task-using-the-create-callback-function">​</a></h3>
<p>Creating a callback involves creating a task with at a minimum a number to callback and a number to call from. If you deployed the template with the <code>Deploy Terraform?</code> option selected, a Studio flow called <code>Template Example Callback Flow</code> has already been created for you, which you can hook up to a phone number in the Twilio Console. Otherwise, a sample setup is shown here in a Studio flow where a number has been wired up to immediately create a callback and hang up.</p>
<p><img decoding="async" loading="lazy" alt="alt text" src="/assets/images/sample-triggering-callback-71348b00b7e37632668efe08e0c6d8b0.png" width="1708" height="1302" class="img_ev3q"></p>
<p>Here you can see three parameters which are populated from the studio flow</p>
<ul>
<li><code>numberToCall: {{trigger.call.From}}</code> - the number the customer dialed from</li>
<li><code>numberToCallFrom: {{trigger.call.To}}</code> - the number the customer tried to dial</li>
<li><code>flexFlowSid: {{flow.flow_sid}}</code> - to capture the entry point of this callback, it is stored on the task and is useful for debugging and tracking. (Optional - since this need not be invoked only from Studio)</li>
</ul>
<p>This serverless function can be used from anywhere, not just the studio flow, to create a callback or voicemail task.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="specifying-the-workflow-to-use">Specifying the Workflow to Use<a href="#specifying-the-workflow-to-use" class="hash-link" aria-label="Direct link to Specifying the Workflow to Use" title="Direct link to Specifying the Workflow to Use">​</a></h4>
<p>The creation of a task requires a workflow. You may create a custom workflow, that uses some collected data to organize the tasks into different queues or maybe something more complex. You may also just want to use the default &quot;Assign To Anyone&quot; workflow that is spawned on a vanilla Flex instance.</p>
<p>Once you have decided which workflow you are using, you can either reference it in the environment file for your serverless-functions (<code>TWILIO_FLEX_CALLBACK_WORKFLOW_SID</code>), or you can explicitly provide a <code>workflowSid</code> in the call to the function.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Tip</div><div class="admonitionContent_BuS1"><p>The setup scripts will automatically set <code>TWILIO_FLEX_CALLBACK_WORKFLOW_SID</code> if it finds a workflow called &quot;Callback&quot;. If Terraform was used to deploy the template, <a href="https://github.com/twilio-professional-services/flex-project-template/blob/main/infra-as-code/terraform/taskrouter/callback.json" target="_blank" rel="noopener noreferrer">this callback workflow</a> has already been created for you.</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="voicemail-additional-parameters">Voicemail Additional Parameters<a href="#voicemail-additional-parameters" class="hash-link" aria-label="Direct link to Voicemail Additional Parameters" title="Direct link to Voicemail Additional Parameters">​</a></h4>
<p>Creating a voicemail involves the same setup as the example above, however the following additional parameters must be passed to the <em>create-callback</em> function from a Record Voicemail widget:</p>
<ul>
<li><code>recordingSid: {{widgets.record_voicemail_1.RecordingSid}}</code> - the recording SID from the Record Voicemail widget</li>
<li><code>recordingUrl: {{widgets.record_voicemail_1.RecordingUrl}}</code> - the recording URL from the Record Voicemail widget</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="using-transcriptions-in-voicemail-tasks">Using Transcriptions in Voicemail Tasks<a href="#using-transcriptions-in-voicemail-tasks" class="hash-link" aria-label="Direct link to Using Transcriptions in Voicemail Tasks" title="Direct link to Using Transcriptions in Voicemail Tasks">​</a></h4>
<p>If you wish to enable transcriptions and show the transcription text on the voicemail task, you can invoke the create-callback function from the Transcription Callback URL on the Record Voicemail widget. Just be sure to include the required params in the URL. e.g.</p>
<p><code>https://custom-flex-extensions-serverless-XXXX-dev.twil.io/features/callback-and-voicemail/studio/create-callback?numberToCall={{trigger.call.From | url_encode}}&amp;numberToCallFrom={{trigger.call.To | url_encode}}&amp;flexFlowSid={{flow.sid}}</code></p>
<p>NOTE: <code>RecordingSid</code> and <code>RecordingUrl</code> are already part of the transcription callback event, along with <code>TranscriptionSid</code> and <code>TranscriptionText</code>. The use of the <code>url_encode</code> <a href="https://www.twilio.com/docs/studio/user-guide/liquid-template-language#standard-filters" target="_blank" rel="noopener noreferrer">Liquid Template Filter</a> allows the leading &#x27;+&#x27; of the to/from phone numbers to be preserved.</p>
<p>If you do go with the transcription approach, the plugin will take care of rendering the transcription text below the playback controls for the recording - per the screenshot animation above.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="requesting-a-callback-or-leaving-a-voicemail-while-in-queue">Requesting a Callback or Leaving a Voicemail While In Queue<a href="#requesting-a-callback-or-leaving-a-voicemail-while-in-queue" class="hash-link" aria-label="Direct link to Requesting a Callback or Leaving a Voicemail While In Queue" title="Direct link to Requesting a Callback or Leaving a Voicemail While In Queue">​</a></h3>
<p>The above steps assume there&#x27;s logic in your IVR to allow a customer to request a callback and/or leave a voicemail.</p>
<p>If you also want to offer up a post-IVR &quot;wait experience&quot; to your customers - to allow them to request a callback or leave a voicemail while they are waiting in queue (i.e. while waiting for TaskRouter to route their call task to an agent), the template provides a boilerplate implementation of exactly this in the <em>wait-experience</em> Serverless Function.</p>
<p>Simply set this function&#x27;s URL as <strong><em>Hold Music URL</em></strong> in the Studio Send to Flex widget, or as the <code>waitUrl</code> if using the <code>&lt;Enqueue&gt;</code> TwiML verb. e.g.</p>
<p><code>https://custom-flex-extensions-serverless-XXXX-dev.twil.io/features/callback-and-voicemail/studio/wait-experience</code></p>
<p>The in-queue logic is designed to maintain the initial task&#x27;s workflow, attributes, etc, so that callback requests follow the same routing logic as the initial task. However, there are customization points within the <code>wait-experience</code> function allowing you to override these, such as specifying an alternate workflow or task channel.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="noteworthy-points-regarding-the-wait-experience-logic">Noteworthy Points Regarding the <em>wait-experience</em> Logic<a href="#noteworthy-points-regarding-the-wait-experience-logic" class="hash-link" aria-label="Direct link to noteworthy-points-regarding-the-wait-experience-logic" title="Direct link to noteworthy-points-regarding-the-wait-experience-logic">​</a></h4>
<ul>
<li><strong>Creating a callback (or voicemail) via the <em>wait-experience</em> logic will <em>retain</em> your place in queue by default</strong> - when we create a new task representing the callback or voicemail request, by default we set the <code>virtualStartTime</code> parameter to the original task&#x27;s <code>dateCreated</code> timestamp. This effectively orders the new task within the queue the same as the original task. This may optionally be disabled within the options under <code>wait-experience.protected.js</code>.</li>
<li><strong>We are able to set useful reporting attributes by programmatically canceling the original call task when a customer chooses to request a callback (or leave a voicemail)</strong> - rather than letting the task auto-cancel via native TaskRouter orchestration when the call ends. This includes a custom cancelation reason, as well as marking the task as <code>abandoned: &quot;Follow-Up&quot;</code> in the <code>conversations</code> attribute - which prevents Flex Insights from including this call in any Abandoned metrics (see <a href="https://www.twilio.com/docs/flex/end-user-guide/insights/abandoned-conversations#abandoned" target="_blank" rel="noopener noreferrer">Track Abandoned Conversations in Flex Insights</a>).</li>
<li><strong>Cancelling the ongoing call task programmatically also prevents the call task reaching an agent when the customer has already committed to leaving a voicemail (or requesting a callback)</strong>. We leave this task cancellation until the very last possible moment - to maximize the opportunity for an agent to answer.</li>
<li><strong>It is essential to lookup and retain the task SID of the ongoing call task immediately - so that we can cancel it later and make changes to its reporting attributes as mentioned above.</strong> Our implementation (see <em>getPendingTaskByCallSid()</em>) immediately retrieves the top 20 most recent <code>pending</code> or <code>reserved</code> (i.e. not-yet-accepted) tasks on the provided <code>workflowSid</code>, and finds the one with the matching <code>call_sid</code> attribute. Since this lookup occurs immediately on entering our configured <code>waitUrl</code> TwiML application - milliseconds after the associated task is created - this approach works very reliably and has been extensively load tested (100% success over a 1000 call test at a rate of 30 calls per second).</li>
<li><strong>If for some reason the <em>wait-experience</em> logic fails to find the task for the ongoing call&#x27;s call SID, it will fail gracefully</strong> by informing the customer that the callback and voicemail capability is currently unavailable.</li>
</ul></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/feature-library/callback-and-voicemail-with-email"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Callback and Voicemail with Email Notifications</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/feature-library/caller-id"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">caller-id</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#flex-user-experience" class="table-of-contents__link toc-highlight">Flex User Experience</a></li><li><a href="#how-does-it-work" class="table-of-contents__link toc-highlight">How Does it Work?</a></li><li><a href="#setup-and-dependencies" class="table-of-contents__link toc-highlight">Setup and Dependencies</a><ul><li><a href="#creating-a-callback-task-using-the-create-callback-function" class="table-of-contents__link toc-highlight">Creating a Callback Task Using the <em>create-callback</em> Function</a></li><li><a href="#requesting-a-callback-or-leaving-a-voicemail-while-in-queue" class="table-of-contents__link toc-highlight">Requesting a Callback or Leaving a Voicemail While In Queue</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Connie Links</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://connie.one" target="_blank" rel="noopener noreferrer" class="footer__link-item">Learn More<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://portal.connie.team" target="_blank" rel="noopener noreferrer" class="footer__link-item">Log In<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/ConnieML/connieRTC-flex" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Connie Corp.</div></div></div></footer></div>
</body>
</html>