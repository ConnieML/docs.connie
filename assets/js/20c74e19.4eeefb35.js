"use strict";(self.webpackChunkflex_project_template_docs=self.webpackChunkflex_project_template_docs||[]).push([[796],{28453:(e,i,n)=>{n.d(i,{R:()=>d,x:()=>l});var s=n(96540);const t={},o=s.createContext(t);function d(e){const i=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function l(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:d(e.components),s.createElement(o.Provider,{value:i},e.children)}},46265:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>d,metadata:()=>s,toc:()=>r});const s=JSON.parse('{"id":"developers/building/deployment/addons","title":"Add-ons","description":"When building a Twilio Flex solution, you may have additional supporting packages that need to be deployed, such as web apps or services. These can be managed and deployed with the template using the addons directory. Packages within this directory will be processed by the setup script, which populates missing environment variables and installs dependencies. Packages within this directory will also be automatically deployed using the included workflows.","source":"@site/docs/developers/building/deployment/02_addons.md","sourceDirName":"developers/building/deployment","slug":"/developers/building/deployment/addons","permalink":"/developers/building/deployment/addons","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"Add-ons"},"sidebar":"developer","previous":{"title":"Local deployment","permalink":"/developers/building/deployment/local-deployment"},"next":{"title":"Docs","permalink":"/developers/building/deployment/docs"}}');var t=n(74848),o=n(28453);const d={title:"Add-ons"},l=void 0,a={},r=[{value:"Included add-ons",id:"included-add-ons",level:2},{value:"serverless-schedule-manager",id:"serverless-schedule-manager",level:3},{value:"twilio-video-demo-app",id:"twilio-video-demo-app",level:3},{value:"Package requirements",id:"package-requirements",level:2},{value:"How it works",id:"how-it-works",level:2}];function c(e){const i={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(i.p,{children:["When building a Twilio Flex solution, you may have additional supporting packages that need to be deployed, such as web apps or services. These can be managed and deployed with the template using the ",(0,t.jsx)(i.code,{children:"addons"})," directory. Packages within this directory will be processed by ",(0,t.jsx)(i.a,{href:"/developers/building/template-utilities/configuration#setup-script-reference",children:"the setup script"}),", which populates missing environment variables and installs dependencies. Packages within this directory will also be automatically deployed using the included workflows."]}),"\n",(0,t.jsx)(i.h2,{id:"included-add-ons",children:"Included add-ons"}),"\n",(0,t.jsx)(i.p,{children:"The template includes a few add-on packages supporting the included features, which serves as an example of how the infrastructure is used."}),"\n",(0,t.jsx)(i.h3,{id:"serverless-schedule-manager",children:"serverless-schedule-manager"}),"\n",(0,t.jsxs)(i.p,{children:["This package manages the serverless functions specific to the ",(0,t.jsx)(i.em,{children:"schedule-manager"})," feature. This package is separate from the ",(0,t.jsx)(i.code,{children:"serverless-functions"})," package due to the actual schedule manager configuration being part of this serverless package--the entire service is re-deployed upon each configuration publish. If you are deploying the schedule-manager feature, you will need to also deploy this package. If you are not deploying the ",(0,t.jsx)(i.code,{children:"schedule-manager"})," feature, this service will not be used and does not need to be deployed."]}),"\n",(0,t.jsx)(i.h3,{id:"twilio-video-demo-app",children:"twilio-video-demo-app"}),"\n",(0,t.jsxs)(i.p,{children:["This proof-of-concept application demonstrates how you can build a video application with ",(0,t.jsx)(i.a,{href:"https://www.twilio.com/docs/video/javascript-getting-started",children:"Twilio Programmable Video JS SDK"}),", ",(0,t.jsx)(i.a,{href:"https://nextjs.org/",children:"Next JS"}),", and ",(0,t.jsx)(i.a,{href:"https://paste.twilio.design/",children:"Twilio Paste"}),". It is used by the included ",(0,t.jsx)(i.code,{children:"chat-to-video-escalation"})," feature to provide a feature-rich video app for agents and customers. This application does not deploy itself--rather, the built application is copied to the ",(0,t.jsx)(i.code,{children:"serverless-functions"})," assets and is deployed when that package is deployed."]}),"\n",(0,t.jsx)(i.h2,{id:"package-requirements",children:"Package requirements"}),"\n",(0,t.jsxs)(i.p,{children:["Packages (which are sub-directories of the ",(0,t.jsx)(i.code,{children:"addons"})," directory) must adhere to a few basic requirements:"]}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:["Must include an npm-compatible ",(0,t.jsx)(i.code,{children:"package.json"})," within its root directory"]}),"\n",(0,t.jsxs)(i.li,{children:["For automatic environment variable population, an ",(0,t.jsx)(i.code,{children:".env.example"})," file must be included within its root directory, with placeholder values in the ",(0,t.jsx)(i.code,{children:"<YOUR_ENVVARNAME>"})," format"]}),"\n",(0,t.jsxs)(i.li,{children:["A ",(0,t.jsx)(i.code,{children:"deploy"})," script defined within ",(0,t.jsx)(i.code,{children:"package.json"})," for deployment"]}),"\n",(0,t.jsxs)(i.li,{children:["A ",(0,t.jsx)(i.code,{children:"postinstall"})," script may optionally be defined within ",(0,t.jsx)(i.code,{children:"package.json"})," for steps that should occur after installation but prior to deploy"]}),"\n"]}),"\n",(0,t.jsx)(i.h2,{id:"how-it-works",children:"How it works"}),"\n",(0,t.jsxs)(i.p,{children:["When the environment setup script is run, packages within the ",(0,t.jsx)(i.code,{children:"addons"})," directory will be processed as follows:"]}),"\n",(0,t.jsxs)(i.ol,{children:["\n",(0,t.jsxs)(i.li,{children:["If a ",(0,t.jsx)(i.code,{children:".env"})," or ",(0,t.jsx)(i.code,{children:".env.<environment>"})," file exists, any placeholder variables will be replaced using the same logic as with other packages. If the file doesn't exist and a ",(0,t.jsx)(i.code,{children:".env.example"})," file exists, that file will first be copied to ",(0,t.jsx)(i.code,{children:".env"})," or ",(0,t.jsx)(i.code,{children:".env.<environment>"}),", depending if the script is run locally.","\n",(0,t.jsxs)(i.ol,{children:["\n",(0,t.jsxs)(i.li,{children:["You should ",(0,t.jsx)(i.a,{href:"/developers/building/template-utilities/configuration#influencing-the-automatic-configuration",children:"take advantage of this"})," for environment variables that are defined within your CI (such as GitHub Actions variables and secrets) or for populating entity SIDs from your Twilio account, which differ between accounts."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(i.li,{children:["The package's dependencies will be installed via ",(0,t.jsx)(i.code,{children:"npm install"}),". If a ",(0,t.jsx)(i.code,{children:"postinstall"})," script is defined, that will also be executed."]}),"\n"]}),"\n",(0,t.jsxs)(i.p,{children:["When performing a deployment, the ",(0,t.jsx)(i.code,{children:"npm run deploy-addons"})," script is executed after the environment setup script. This will run ",(0,t.jsx)(i.code,{children:"npm run deploy"})," from each package within the ",(0,t.jsx)(i.code,{children:"addons"})," directory."]})]})}function h(e={}){const{wrapper:i}={...(0,o.R)(),...e.components};return i?(0,t.jsx)(i,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}}}]);