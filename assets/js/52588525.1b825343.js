"use strict";(self.webpackChunkflex_project_template_docs=self.webpackChunkflex_project_template_docs||[]).push([[7207],{15292:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"developers/building/feature-management/channels/voice/add-ons/email-notifications","title":"Email Notifications Add-On","description":"Send voicemail recordings and transcripts directly to staff email addresses when messages are left.","source":"@site/docs/developers/building/feature-management/channels/voice/add-ons/email-notifications.md","sourceDirName":"developers/building/feature-management/channels/voice/add-ons","slug":"/developers/building/feature-management/channels/voice/add-ons/email-notifications","permalink":"/developers/building/feature-management/channels/voice/add-ons/email-notifications","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_label":"Email Notifications","sidebar_position":1,"title":"Email Notifications Add-On"},"sidebar":"developer","previous":{"title":"Overview","permalink":"/developers/building/feature-management/channels/voice/add-ons/overview"},"next":{"title":"IVR Functions","permalink":"/developers/building/feature-management/channels/voice/add-ons/ivr-functions"}}');var s=i(74848),t=i(28453);const l={sidebar_label:"Email Notifications",sidebar_position:1,title:"Email Notifications Add-On"},a="Email Notifications Add-On",o={},d=[{value:"What It Does",id:"what-it-does",level:2},{value:"When to Use",id:"when-to-use",level:2},{value:"Compatible Workflows",id:"compatible-workflows",level:2},{value:"Technical Implementation",id:"technical-implementation",level:2},{value:"Email Service Providers",id:"email-service-providers",level:3},{value:"Architecture Overview",id:"architecture-overview",level:3},{value:"Setup Steps",id:"setup-steps",level:3},{value:"Option 1: Mailgun Setup (Recommended)",id:"option-1-mailgun-setup-recommended",level:4},{value:"Option 2: SendGrid Setup",id:"option-2-sendgrid-setup",level:4},{value:"Option 3: SMTP2GO Setup <em>(Coming Soon)</em>",id:"option-3-smtp2go-setup-coming-soon",level:4},{value:"Email Template Customization",id:"email-template-customization",level:2},{value:"Basic Template",id:"basic-template",level:3},{value:"Professional Template",id:"professional-template",level:3},{value:"Configuration Options",id:"configuration-options",level:2},{value:"Multiple Recipients",id:"multiple-recipients",level:3},{value:"Conditional Routing",id:"conditional-routing",level:3},{value:"Attachment Options",id:"attachment-options",level:3},{value:"Integration with Other Add-Ons",id:"integration-with-other-add-ons",level:2},{value:"With Transcription Add-On",id:"with-transcription-add-on",level:3},{value:"With CRM Integration",id:"with-crm-integration",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Common Issues",id:"common-issues",level:3},{value:"Performance Optimization",id:"performance-optimization",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Security",id:"security",level:3},{value:"Reliability",id:"reliability",level:3},{value:"Compliance",id:"compliance",level:3}];function c(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"email-notifications-add-on",children:"Email Notifications Add-On"})}),"\n",(0,s.jsx)(n.p,{children:"Send voicemail recordings and transcripts directly to staff email addresses when messages are left."}),"\n",(0,s.jsx)(n.h2,{id:"what-it-does",children:"What It Does"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Automatically emails voicemail recordings as MP3 attachments"}),"\n",(0,s.jsx)(n.li,{children:"Includes caller information (number, timestamp, duration)"}),"\n",(0,s.jsx)(n.li,{children:"Optional: Include transcription text in email body"}),"\n",(0,s.jsx)(n.li,{children:"Supports multiple recipient addresses"}),"\n",(0,s.jsx)(n.li,{children:"Customizable email templates"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"when-to-use",children:"When to Use"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Organizations that prefer email-centric workflows"}),"\n",(0,s.jsx)(n.li,{children:"Need immediate notification of voicemails"}),"\n",(0,s.jsx)(n.li,{children:"Staff work primarily from email"}),"\n",(0,s.jsx)(n.li,{children:"Want backup delivery method for messages"}),"\n",(0,s.jsx)(n.li,{children:"Compliance requires email trails"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"compatible-workflows",children:"Compatible Workflows"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"Direct + Options"}),": Email notifications for voicemail option"]}),"\n",(0,s.jsxs)(n.li,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"Direct to Voicemail"}),": Email every recorded message"]}),"\n",(0,s.jsxs)(n.li,{children:["\u26a0\ufe0f ",(0,s.jsx)(n.strong,{children:"Direct"}),": Only applicable if voicemail add-on also enabled"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"technical-implementation",children:"Technical Implementation"}),"\n",(0,s.jsx)(n.h3,{id:"email-service-providers",children:"Email Service Providers"}),"\n",(0,s.jsx)(n.p,{children:"Choose from supported providers:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Provider"}),(0,s.jsx)(n.th,{children:"Free Tier"}),(0,s.jsx)(n.th,{children:"Setup Complexity"}),(0,s.jsx)(n.th,{children:"Best For"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Mailgun"})}),(0,s.jsx)(n.td,{children:"100 emails/day"}),(0,s.jsx)(n.td,{children:"Simple"}),(0,s.jsx)(n.td,{children:"Most organizations"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"SendGrid"})}),(0,s.jsx)(n.td,{children:"100 emails/day"}),(0,s.jsx)(n.td,{children:"Simple"}),(0,s.jsx)(n.td,{children:"High deliverability needs"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"SMTP2GO"})}),(0,s.jsx)(n.td,{children:"1,000 emails/month"}),(0,s.jsx)(n.td,{children:"Moderate"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.em,{children:"Coming Soon"})})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"architecture-overview",children:"Architecture Overview"}),"\n",(0,s.jsx)(n.mermaid,{value:"graph LR\n    A[Voicemail Recorded] --\x3e B[Studio Flow]\n    B --\x3e C[Trigger Function]\n    C --\x3e D[Email Service API]\n    D --\x3e E[Staff Email]\n    C --\x3e F[Attach Recording]\n    C --\x3e G[Add Transcription]"}),"\n",(0,s.jsx)(n.h3,{id:"setup-steps",children:"Setup Steps"}),"\n",(0,s.jsx)(n.h4,{id:"option-1-mailgun-setup-recommended",children:"Option 1: Mailgun Setup (Recommended)"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Step 1: Create Mailgun Account"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Go to ",(0,s.jsx)(n.a,{href:"https://mailgun.com",children:"mailgun.com"})," and create an account"]}),"\n",(0,s.jsxs)(n.li,{children:["Choose ",(0,s.jsx)(n.strong,{children:"US"})," region (recommended for most organizations)"]}),"\n",(0,s.jsx)(n.li,{children:"Verify your email and complete account setup"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Step 2: Add Your Domain"}),"\nUse a dedicated subdomain for best deliverability:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Recommended format"}),": ",(0,s.jsx)(n.code,{children:"voicemail.[yourdomain].com"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Example"}),": If your domain is ",(0,s.jsx)(n.code,{children:"helpinghand.org"}),", use ",(0,s.jsx)(n.code,{children:"voicemail.helpinghand.org"})]}),"\n"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["In Mailgun dashboard \u2192 ",(0,s.jsx)(n.strong,{children:"Sending"})," \u2192 ",(0,s.jsx)(n.strong,{children:"Domains"})]}),"\n",(0,s.jsxs)(n.li,{children:["Click ",(0,s.jsx)(n.strong,{children:"Add New Domain"})]}),"\n",(0,s.jsxs)(n.li,{children:["Enter: ",(0,s.jsx)(n.code,{children:"voicemail.[YOUR_DOMAIN]"})]}),"\n",(0,s.jsxs)(n.li,{children:["Select ",(0,s.jsx)(n.strong,{children:"US"})," region"]}),"\n",(0,s.jsxs)(n.li,{children:["Click ",(0,s.jsx)(n.strong,{children:"Add Domain"})]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Step 3: Configure DNS Records"}),"\nMailgun will provide DNS records. Add these to your domain:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-dns",children:"# Example DNS records (yours will be different)\nType: TXT\nName: voicemail.helpinghand.org\nValue: v=spf1 include:mailgun.org ~all\n\nType: TXT  \nName: smtp._domainkey.voicemail.helpinghand.org\nValue: k=rsa; p=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQ...\n\nType: CNAME\nName: email.voicemail.helpinghand.org\nValue: mailgun.org\n\nType: MX\nName: voicemail.helpinghand.org\nValue: 10 mxa.mailgun.org\n"})}),"\n",(0,s.jsx)(n.admonition,{title:"DNS Propagation Time",type:"warning",children:(0,s.jsx)(n.p,{children:"DNS changes take 1-24 hours to propagate. Check verification status in Mailgun dashboard."})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Step 4: Get Your Sending API Key"})}),"\n",(0,s.jsx)(n.admonition,{title:"Critical: Use Domain-Specific Sending Key",type:"warning",children:(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Do NOT use the Private API key from Settings \u2192 API Keys."})," You need a domain-specific sending key."]})}),"\n",(0,s.jsx)(n.p,{children:"After your domain is verified:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Navigate to your domain: Mailgun dashboard \u2192 ",(0,s.jsx)(n.strong,{children:"Sending"})," \u2192 ",(0,s.jsx)(n.strong,{children:"Domains"})]}),"\n",(0,s.jsxs)(n.li,{children:["Click on your domain (e.g., ",(0,s.jsx)(n.code,{children:"voicemail.yourdomain.com"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:["Go to ",(0,s.jsx)(n.strong,{children:"Domain settings"})," \u2192 ",(0,s.jsx)(n.strong,{children:"Sending keys"})," tab"]}),"\n",(0,s.jsxs)(n.li,{children:["Click ",(0,s.jsx)(n.strong,{children:"Add sending key"})]}),"\n",(0,s.jsxs)(n.li,{children:["Copy both the ",(0,s.jsx)(n.strong,{children:"Key ID"})," and ",(0,s.jsx)(n.strong,{children:"API Send Key"})]}),"\n",(0,s.jsxs)(n.li,{children:["Use the ",(0,s.jsx)(n.strong,{children:"API Send Key"})," for your ",(0,s.jsx)(n.code,{children:"MAILGUN_API_KEY"})," environment variable"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Step 5: Test Mailgun Configuration"})}),"\n",(0,s.jsx)(n.admonition,{title:"Critical: Test Before Deployment",type:"danger",children:(0,s.jsx)(n.p,{children:"This step prevents 90% of setup failures."})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Test your Mailgun API before proceeding\ncurl -s -w \"\\nHTTP Status: %{http_code}\\n\" --user \"api:[YOUR_SENDING_API_KEY]\" \\\n    https://api.mailgun.net/v3/[YOUR_DOMAIN]/messages \\\n    -F from='Test <test@[YOUR_DOMAIN]>' \\\n    -F to='[ADMIN_EMAIL]' \\\n    -F subject='Pre-Deployment API Test' \\\n    -F text='If you receive this, Mailgun API is working correctly.'\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Expected result:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{"id":"<20250722104855.38483d1186b94dc9@yourdomain.com>","message":"Queued. Thank you."}\nHTTP Status: 200\n'})}),"\n",(0,s.jsx)(n.h4,{id:"option-2-sendgrid-setup",children:"Option 2: SendGrid Setup"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Create SendGrid account at ",(0,s.jsx)(n.a,{href:"https://sendgrid.com",children:"sendgrid.com"})]}),"\n",(0,s.jsx)(n.li,{children:"Verify your sender identity (domain or single sender)"}),"\n",(0,s.jsx)(n.li,{children:'Create an API key with "Mail Send" permissions'}),"\n",(0,s.jsx)(n.li,{children:"Configure DNS records for domain authentication"}),"\n",(0,s.jsx)(n.li,{children:"Test API connectivity"}),"\n"]}),"\n",(0,s.jsxs)(n.h4,{id:"option-3-smtp2go-setup-coming-soon",children:["Option 3: SMTP2GO Setup ",(0,s.jsx)(n.em,{children:"(Coming Soon)"})]}),"\n",(0,s.jsx)(n.p,{children:"SMTP2GO integration is planned for a future release."}),"\n",(0,s.jsxs)(n.ol,{start:"2",children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Configure Serverless Function"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// Basic email notification function\nexports.handler = async (context, event, callback) => {\n  const { recording_url, caller_number, duration } = event;\n  \n  // Format email content\n  const emailData = {\n    to: context.NOTIFICATION_EMAIL,\n    subject: `New voicemail from ${caller_number}`,\n    html: `\n      <h3>New Voicemail Message</h3>\n      <p><strong>From:</strong> ${caller_number}</p>\n      <p><strong>Duration:</strong> ${duration} seconds</p>\n      <p><strong>Time:</strong> ${new Date().toLocaleString()}</p>\n    `,\n    attachments: [{\n      filename: 'voicemail.mp3',\n      path: recording_url\n    }]\n  };\n  \n  // Send via email service\n  await sendEmail(emailData);\n  callback(null, 'Email sent successfully');\n};\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Update Studio Flow"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Add webhook widget after recording"}),"\n",(0,s.jsx)(n.li,{children:"Pass recording URL and caller data"}),"\n",(0,s.jsx)(n.li,{children:"Handle email delivery confirmation"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Configure Environment Variables"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"MAILGUN_API_KEY=your_mailgun_key\nMAILGUN_DOMAIN=your_domain.mailgun.org\nNOTIFICATION_EMAIL=admin@yourorg.org\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"email-template-customization",children:"Email Template Customization"}),"\n",(0,s.jsx)(n.h3,{id:"basic-template",children:"Basic Template"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",children:"<h2>New Voicemail Message</h2>\n<p><strong>From:</strong> {{caller_number}}</p>\n<p><strong>Duration:</strong> {{duration}} seconds</p>\n<p><strong>Received:</strong> {{timestamp}}</p>\n{{#if transcription}}\n<h3>Message Transcript:</h3>\n<p>{{transcription}}</p>\n{{/if}}\n<p>Audio recording is attached.</p>\n"})}),"\n",(0,s.jsx)(n.h3,{id:"professional-template",children:"Professional Template"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",children:'<div style="font-family: Arial, sans-serif; max-width: 600px;">\n  <header style="background: #f4f4f4; padding: 20px;">\n    <h2>{{organization_name}} - New Voicemail</h2>\n  </header>\n  <main style="padding: 20px;">\n    <h3>Message Details</h3>\n    <table>\n      <tr><td><strong>Caller:</strong></td><td>{{caller_number}}</td></tr>\n      <tr><td><strong>Duration:</strong></td><td>{{duration}} seconds</td></tr>\n      <tr><td><strong>Received:</strong></td><td>{{timestamp}}</td></tr>\n    </table>\n    {{#if transcription}}\n    <h3>Transcript</h3>\n    <div style="background: #f9f9f9; padding: 15px; border-left: 4px solid #007cba;">\n      {{transcription}}\n    </div>\n    {{/if}}\n  </main>\n</div>\n'})}),"\n",(0,s.jsx)(n.h2,{id:"configuration-options",children:"Configuration Options"}),"\n",(0,s.jsx)(n.h3,{id:"multiple-recipients",children:"Multiple Recipients"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"const recipients = [\n  'admin@yourorg.org',\n  'support@yourorg.org',\n  'manager@yourorg.org'\n];\n"})}),"\n",(0,s.jsx)(n.h3,{id:"conditional-routing",children:"Conditional Routing"}),"\n",(0,s.jsx)(n.p,{children:"Route emails based on criteria:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// Route by time of day\nconst isBusinessHours = checkBusinessHours();\nconst recipientEmail = isBusinessHours ? \n  context.BUSINESS_HOURS_EMAIL : \n  context.AFTER_HOURS_EMAIL;\n\n// Route by caller type  \nconst isKnownCaller = await checkCRM(caller_number);\nconst priority = isKnownCaller ? 'high' : 'normal';\n"})}),"\n",(0,s.jsx)(n.h3,{id:"attachment-options",children:"Attachment Options"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"const attachments = [];\n\n// Always include recording\nattachments.push({\n  filename: `voicemail_${timestamp}.mp3`,\n  path: recording_url\n});\n\n// Optionally include transcript as text file\nif (transcription) {\n  attachments.push({\n    filename: 'transcript.txt',\n    content: transcription\n  });\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"integration-with-other-add-ons",children:"Integration with Other Add-Ons"}),"\n",(0,s.jsx)(n.h3,{id:"with-transcription-add-on",children:"With Transcription Add-On"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// Include transcription in email body\nif (event.transcription) {\n  emailData.html += `\n    <h3>Message Transcript:</h3>\n    <p>${event.transcription}</p>\n  `;\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"with-crm-integration",children:"With CRM Integration"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// Include caller context from CRM\nconst callerInfo = await lookupCaller(caller_number);\nif (callerInfo) {\n  emailData.html += `\n    <h3>Caller Information:</h3>\n    <p><strong>Name:</strong> ${callerInfo.name}</p>\n    <p><strong>Account:</strong> ${callerInfo.account_id}</p>\n  `;\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,s.jsx)(n.h3,{id:"common-issues",children:"Common Issues"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Emails not being sent"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Check email service API credentials"}),"\n",(0,s.jsx)(n.li,{children:"Verify webhook URLs are accessible"}),"\n",(0,s.jsx)(n.li,{children:"Review serverless function logs"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Attachments missing"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Confirm recording URL is accessible"}),"\n",(0,s.jsx)(n.li,{children:"Check file size limits (typically 25MB)"}),"\n",(0,s.jsx)(n.li,{children:"Verify audio format compatibility"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Emails going to spam"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Configure SPF/DKIM records"}),"\n",(0,s.jsx)(n.li,{children:"Use professional from address"}),"\n",(0,s.jsx)(n.li,{children:"Avoid spam trigger words in subject"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"performance-optimization",children:"Performance Optimization"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Large Recording Files"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// Check file size before attaching\nconst fileSize = await getRecordingSize(recording_url);\nif (fileSize > 10 * 1024 * 1024) { // 10MB limit\n  // Include download link instead of attachment\n  emailData.html += `\n    <p><a href=\"${recording_url}\">Download Recording</a></p>\n  `;\n} else {\n  emailData.attachments = [{ filename: 'voicemail.mp3', path: recording_url }];\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Rate Limiting"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// Implement exponential backoff for retries\nconst retry = async (fn, attempts = 3) => {\n  try {\n    return await fn();\n  } catch (error) {\n    if (attempts > 1) {\n      await sleep(1000 * (4 - attempts)); // Backoff delay\n      return retry(fn, attempts - 1);\n    }\n    throw error;\n  }\n};\n"})}),"\n",(0,s.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,s.jsx)(n.h3,{id:"security",children:"Security"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Use environment variables for API keys"}),"\n",(0,s.jsx)(n.li,{children:"Validate webhook signatures"}),"\n",(0,s.jsx)(n.li,{children:"Sanitize email content"}),"\n",(0,s.jsx)(n.li,{children:"Implement rate limiting"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"reliability",children:"Reliability"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Add retry logic for failed sends"}),"\n",(0,s.jsx)(n.li,{children:"Log all email attempts"}),"\n",(0,s.jsx)(n.li,{children:"Monitor delivery rates"}),"\n",(0,s.jsx)(n.li,{children:"Have backup notification methods"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"compliance",children:"Compliance"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Include opt-out mechanisms"}),"\n",(0,s.jsx)(n.li,{children:"Respect email retention policies"}),"\n",(0,s.jsx)(n.li,{children:"Log email delivery for audit trails"}),"\n",(0,s.jsx)(n.li,{children:"Follow GDPR/privacy requirements"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>a});var r=i(96540);const s={},t=r.createContext(s);function l(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);