"use strict";(self.webpackChunkflex_project_template_docs=self.webpackChunkflex_project_template_docs||[]).push([[620],{28087:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>r,default:()=>u,frontMatter:()=>i,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"feature-library/multi-call","title":"multi-call","description":"This feature requires Flex UI 2.8 or later, as it depends on Twilio Voice SDK features that were unavailable prior to that version.","source":"@site/docs/feature-library/multi-call.md","sourceDirName":"feature-library","slug":"/feature-library/multi-call","permalink":"/feature-library/multi-call","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"sidebar_label":"multi-call","title":"multi-call"},"sidebar":"tutorialSidebar","previous":{"title":"metrics-data-tiles","permalink":"/feature-library/metrics-data-tiles"},"next":{"title":"omni-channel-capacity-management","permalink":"/feature-library/omni-channel-capacity-management"}}');var l=a(74848),o=a(28453);const i={sidebar_label:"multi-call",title:"multi-call"},r=void 0,s={},c=[{value:"Setup and dependencies",id:"setup-and-dependencies",level:2},{value:"TaskRouter",id:"taskrouter",level:3},{value:"Flex configuration",id:"flex-configuration",level:3},{value:"How it works",id:"how-it-works",level:2}];function d(e){const t={admonition:"admonition",code:"code",h2:"h2",h3:"h3",img:"img",p:"p",...(0,o.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(t.admonition,{title:"Flex UI 2.8 or later required",type:"info",children:(0,l.jsx)(t.p,{children:"This feature requires Flex UI 2.8 or later, as it depends on Twilio Voice SDK features that were unavailable prior to that version."})}),"\n",(0,l.jsx)(t.p,{children:"Out of the box, Flex does not allow a single worker to have more than one call active at once. Due to this limitation, another worker cannot transfer a call to another worker if they already are on a call. This feature allows a worker to handle more than one call at once, and will automatically place other calls on hold when accepting a new call. As a result, a worker can gracefully handle a transferred call while already assigned another call, for example."}),"\n",(0,l.jsx)(t.p,{children:(0,l.jsx)(t.img,{alt:"Multi-call demo",src:a(43541).A+"",width:"1273",height:"832"})}),"\n",(0,l.jsx)(t.h2,{id:"setup-and-dependencies",children:"Setup and dependencies"}),"\n",(0,l.jsx)(t.p,{children:"This feature requires some TaskRouter configuration changes in addition to Flex configuration changes."}),"\n",(0,l.jsx)(t.h3,{id:"taskrouter",children:"TaskRouter"}),"\n",(0,l.jsxs)(t.p,{children:["First, agents will need their capacity for the ",(0,l.jsx)(t.code,{children:"voice"})," channel to be increased from 1 to a larger number. This can be done via the console, API, Single Sign On configuration, or via the ",(0,l.jsx)(t.code,{children:"supervisor-capacity"})," plugin feature. This will enable TaskRouter to successfully transfer or assign a call to a worker that already has another call."]}),"\n",(0,l.jsxs)(t.p,{children:["Now that workers can accept multiple calls, if you want to route inbound calls to only workers not already on a call, we need to update the TaskRouter workflow(s) so that agents are not routed multiple calls from the queue. For each workflow filter, set the target worker expression to ",(0,l.jsx)(t.code,{children:"worker.channel.voice.available_capacity_percentage == 100"}),". If you already have a target worker expression defined, you will need to combine the logic with ",(0,l.jsx)(t.code,{children:"AND"}),"."]}),"\n",(0,l.jsx)(t.admonition,{type:"warning",children:(0,l.jsx)(t.p,{children:"Transfers to queues will not use the above configured worker expression. If workers in transfer queues do not all have their capacity set to 1, customize the queue transfer directory to instead transfer to workflows. Otherwise, transfers to queues may be assigned to workers already on calls."})}),"\n",(0,l.jsx)(t.h3,{id:"flex-configuration",children:"Flex configuration"}),"\n",(0,l.jsxs)(t.p,{children:["In your flex-config file(s), all you need to do is enable the ",(0,l.jsx)(t.code,{children:"multi_call"})," feature."]}),"\n",(0,l.jsx)(t.admonition,{type:"tip",children:(0,l.jsx)(t.p,{children:"If you wish to use this feature with outbound calling (for example, to allow a worker to receive an inbound call while already handling an outbound call), even though this feature can handle the scenario successfully, Flex will display an alert dialog to reject the incoming call or disconnect the outbound call. Please contact Twilio Support to enable a feature flag on your account to disable the multi call alert dialog."})}),"\n",(0,l.jsx)(t.h2,{id:"how-it-works",children:"How it works"}),"\n",(0,l.jsxs)(t.p,{children:["The reason that Flex does not support multiple simultaneous calls out-of-the-box is due to a limitation in the Twilio Voice JavaScript SDK used by Flex. To work around this limitation, when another call is accepted, the ",(0,l.jsx)(t.code,{children:"multi-call"})," feature instantiates a second Voice SDK ",(0,l.jsx)(t.code,{children:"Device"})," and forwards the call to it. This new instance of the Voice SDK is then passed the same configuration options as the built-in Voice SDK instance."]}),"\n",(0,l.jsxs)(t.p,{children:["Due to the Voice SDK limitation, Flex's state maintains an assumption that only one call at a time may be considered active. To work around this, the ",(0,l.jsx)(t.code,{children:"multi-call"})," feature changes the active call in Flex state whenever the selected task changes."]}),"\n",(0,l.jsx)(t.p,{children:"When handling more than one call at once, only one call should be heard by the agent at a time. To handle this, when accepting or un-holding a call, any other active call is immediately placed on hold and muted. Mute is toggled in addition to hold in order to prevent the agent from being recorded on the wrong call."}),"\n",(0,l.jsx)(t.p,{children:"Finally, the teams view 'calls' column has been replaced and re-styled to prevent multiple calls from being cut off in the view."})]})}function u(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,l.jsx)(t,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},28453:(e,t,a)=>{a.d(t,{R:()=>i,x:()=>r});var n=a(96540);const l={},o=n.createContext(l);function i(e){const t=n.useContext(o);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:i(e.components),n.createElement(o.Provider,{value:t},e.children)}},43541:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/multi-call-443a02044ec6bdfffb40a5aad2a06a6b.gif"}}]);