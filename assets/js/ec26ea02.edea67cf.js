"use strict";(self.webpackChunkflex_project_template_docs=self.webpackChunkflex_project_template_docs||[]).push([[4915],{11470:(e,t,i)=>{i.d(t,{A:()=>w});var n=i(96540),r=i(18215),s=i(23104),a=i(56347),l=i(205),o=i(57485),d=i(31682),c=i(70679);function h(e){return n.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,n.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function u(e){const{values:t,children:i}=e;return(0,n.useMemo)(()=>{const e=t??function(e){return h(e).map(({props:{value:e,label:t,attributes:i,default:n}})=>({value:e,label:t,attributes:i,default:n}))}(i);return function(e){const t=(0,d.XI)(e,(e,t)=>e.value===t.value);if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[t,i])}function p({value:e,tabValues:t}){return t.some(t=>t.value===e)}function v({queryString:e=!1,groupId:t}){const i=(0,a.W6)(),r=function({queryString:e=!1,groupId:t}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:e,groupId:t});return[(0,o.aZ)(r),(0,n.useCallback)(e=>{if(!r)return;const t=new URLSearchParams(i.location.search);t.set(r,e),i.replace({...i.location,search:t.toString()})},[r,i])]}function f(e){const{defaultValue:t,queryString:i=!1,groupId:r}=e,s=u(e),[a,o]=(0,n.useState)(()=>function({defaultValue:e,tabValues:t}){if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!p({value:e,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${t.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const i=t.find(e=>e.default)??t[0];if(!i)throw new Error("Unexpected error: 0 tabValues");return i.value}({defaultValue:t,tabValues:s})),[d,h]=v({queryString:i,groupId:r}),[f,m]=function({groupId:e}){const t=function(e){return e?`docusaurus.tab.${e}`:null}(e),[i,r]=(0,c.Dv)(t);return[i,(0,n.useCallback)(e=>{t&&r.set(e)},[t,r])]}({groupId:r}),x=(()=>{const e=d??f;return p({value:e,tabValues:s})?e:null})();(0,l.A)(()=>{x&&o(x)},[x]);return{selectedValue:a,selectValue:(0,n.useCallback)(e=>{if(!p({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);o(e),h(e),m(e)},[h,m,s]),tabValues:s}}var m=i(92303);const x={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var b=i(74848);function j({className:e,block:t,selectedValue:i,selectValue:n,tabValues:a}){const l=[],{blockElementScrollPositionUntilNextRender:o}=(0,s.a_)(),d=e=>{const t=e.currentTarget,r=l.indexOf(t),s=a[r].value;s!==i&&(o(t),n(s))},c=e=>{let t=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const i=l.indexOf(e.currentTarget)+1;t=l[i]??l[0];break}case"ArrowLeft":{const i=l.indexOf(e.currentTarget)-1;t=l[i]??l[l.length-1];break}}t?.focus()};return(0,b.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.A)("tabs",{"tabs--block":t},e),children:a.map(({value:e,label:t,attributes:n})=>(0,b.jsx)("li",{role:"tab",tabIndex:i===e?0:-1,"aria-selected":i===e,ref:e=>{l.push(e)},onKeyDown:c,onClick:d,...n,className:(0,r.A)("tabs__item",x.tabItem,n?.className,{"tabs__item--active":i===e}),children:t??e},e))})}function g({lazy:e,children:t,selectedValue:i}){const s=(Array.isArray(t)?t:[t]).filter(Boolean);if(e){const e=s.find(e=>e.props.value===i);return e?(0,n.cloneElement)(e,{className:(0,r.A)("margin-top--md",e.props.className)}):null}return(0,b.jsx)("div",{className:"margin-top--md",children:s.map((e,t)=>(0,n.cloneElement)(e,{key:t,hidden:e.props.value!==i}))})}function y(e){const t=f(e);return(0,b.jsxs)("div",{className:(0,r.A)("tabs-container",x.tabList),children:[(0,b.jsx)(j,{...t,...e}),(0,b.jsx)(g,{...t,...e})]})}function w(e){const t=(0,m.A)();return(0,b.jsx)(y,{...e,children:h(e.children)},String(t))}},19365:(e,t,i)=>{i.d(t,{A:()=>a});i(96540);var n=i(18215);const r={tabItem:"tabItem_Ymn6"};var s=i(74848);function a({children:e,hidden:t,className:i}){return(0,s.jsx)("div",{role:"tabpanel",className:(0,n.A)(r.tabItem,i),hidden:t,children:e})}},28453:(e,t,i)=>{i.d(t,{R:()=>a,x:()=>l});var n=i(96540);const r={},s=n.createContext(r);function a(e){const t=n.useContext(s);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),n.createElement(s.Provider,{value:t},e.children)}},48395:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>p,contentTitle:()=>u,default:()=>m,frontMatter:()=>h,metadata:()=>n,toc:()=>v});const n=JSON.parse('{"id":"feature-library/activity-skill-filter","title":"activity-skill-filter","description":"Overview","source":"@site/docs/feature-library/activity-skill-filter.md","sourceDirName":"feature-library","slug":"/feature-library/activity-skill-filter","permalink":"/feature-library/activity-skill-filter","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"sidebar_label":"activity-skill-filter","title":"activity-skill-filter"},"sidebar":"tutorialSidebar","previous":{"title":"activity-reservation-handler","permalink":"/feature-library/activity-reservation-handler"},"next":{"title":"admin-ui","permalink":"/feature-library/admin-ui"}}');var r=i(74848),s=i(28453),a=i(11470),l=i(19365);const o=i.p+"assets/images/feature-enabled-710ce6fc977218566b6f5b06401ec03c.png",d=i.p+"assets/images/feature-disabled-51a17ee262d95ac28eaa431f8830d85f.png";var c=i(61425);const h={sidebar_label:"activity-skill-filter",title:"activity-skill-filter"},u=void 0,p={},v=[...c.RM,{value:"Overview",id:"overview",level:2},{value:"Business Details",id:"business-details",level:2},{value:"context",id:"context",level:3},{value:"objective",id:"objective",level:3},{value:"Known Issues",id:"known-issues",level:2},{value:"issue one",id:"issue-one",level:3},{value:"Flex User Experience",id:"flex-user-experience",level:2},{value:"Configuration Options and Dependencies",id:"configuration-options-and-dependencies",level:2},{value:"configuration options",id:"configuration-options",level:3},{value:"rules",id:"rules",level:4},{value:"activity_name_or_sid",id:"activity_name_or_sid",level:4},{value:"example",id:"example",level:4},{value:"dependencies",id:"dependencies",level:3},{value:"Custom Changes",id:"custom-changes",level:2},{value:"Technical Details",id:"technical-details",level:2},{value:"high level implementation",id:"high-level-implementation",level:3},{value:"deriving the rules",id:"deriving-the-rules",level:4},{value:"MainHeader",id:"mainheader",level:4},{value:"WorkerProfile",id:"workerprofile",level:4},{value:"sequence diagram",id:"sequence-diagram",level:3},{value:"flex hooks",id:"flex-hooks",level:3}];function f(e){const t={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",mermaid:"mermaid",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.Ay,{}),"\n",(0,r.jsx)(t.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(t.p,{children:"This feature allows administrators to configure visibility of Agent Activities based on skills, as well as ordering the Activities in the Activities drop down menu."}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsx)(t.h2,{id:"business-details",children:"Business Details"}),"\n",(0,r.jsx)(t.h3,{id:"context",children:"context"}),"\n",(0,r.jsx)(t.p,{children:"It is not uncommon to create Activities that should only ever be used or set programmatically."}),"\n",(0,r.jsx)(t.p,{children:"It might also be the case that only certain users should be able to set particular Activities."}),"\n",(0,r.jsx)(t.p,{children:"Although minor it is also a common request for agents to see the most frequently used Activities first in the drop down menu."}),"\n",(0,r.jsx)(t.h3,{id:"objective",children:"objective"}),"\n",(0,r.jsx)(t.p,{children:"This feature aims to address these needs by providing the administrator the ability to lock down Activities by skill as well as ordering them based on a set order then alphabetically."}),"\n",(0,r.jsx)(t.h2,{id:"known-issues",children:"Known Issues"}),"\n",(0,r.jsx)(t.h3,{id:"issue-one",children:"issue one"}),"\n",(0,r.jsx)(t.p,{children:'On older Twilio Flex accounts a TaskRouter Activity of "Reserved" may be present. This Activity is automatically hidden by the Flex UI and breaks the logic of the plugin. In this scenario it is advised you remove any TaskQueue references to the "Reserved" activity (which will likely be the activity to use when task is assigned on the TaskQueue and as such isn\'t actually used by Flex) and then delete the "Reserved" Activity.'}),"\n",(0,r.jsx)(t.h2,{id:"flex-user-experience",children:"Flex User Experience"}),"\n",(0,r.jsxs)(t.p,{children:["The following example images show the behavior of the Activity skill filter might behave when the system Activities from ",(0,r.jsx)(t.a,{href:"./activity-reservation-handler",children:"activity reservation handler"})," are hidden using non-existent skills and the ",(0,r.jsx)(t.code,{children:"Offline"})," Activity is set to last position.  As can be seen, the other Activities are ordered alphabetically."]}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"With Feature"}),(0,r.jsx)(t.th,{children:"Without Feature"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)("img",{src:o,width:"200"})}),(0,r.jsx)(t.td,{children:(0,r.jsx)("img",{src:d,width:"200"})})]})})]}),"\n",(0,r.jsx)(t.h2,{id:"configuration-options-and-dependencies",children:"Configuration Options and Dependencies"}),"\n",(0,r.jsx)(t.h3,{id:"configuration-options",children:"configuration options"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-json",children:'"activity_skill_filter": {\n  "enabled": true, // controls whether this feature is enabled\n  "filter_teams_view": true, // controls whether this feature affects the Teams view WorkProfile activity menu\n  "rules": {\n    "<ACTIVITY_NAME_OR_SID>": {\n      "required_skill": "skill_name", // name of skill required to allow this activity, or null to allow all workers\n      "sort_order": order // zero-based integer\n    }\n  }\n}\n'})}),"\n",(0,r.jsxs)(t.p,{children:["This feature depends on a configured set of rules for the different Agent Activities. After ",(0,r.jsx)(t.a,{href:"/developers/building/template-utilities/configuration#configuration-management",children:"enabling"})," the feature the following configuration is required"]}),"\n",(0,r.jsx)(t.p,{children:"The following are the descriptions of the configuration objects and what they represent"}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.strong,{children:"filter_teams_view"}),": this variable represents whether or not to override the supervisor teams view, also applying the filters and sort order to the worker profile screen when viewing workers."]}),"\n",(0,r.jsx)(t.h4,{id:"rules",children:"rules"}),"\n",(0,r.jsx)(t.p,{children:"this object allows the administrator to customize which activities are associated with which skills and what order they should appear in"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:(0,r.jsx)(t.code,{children:"<ACTIVITY_NAME_OR_SID>"})}),":  this element name represents the name of the activity or the SID of the activity for which you want to set a rule"]}),"\n"]}),"\n",(0,r.jsx)(t.h4,{id:"activity_name_or_sid",children:"activity_name_or_sid"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"required_skill"}),": this variable represents the skill name that is required to see the activity in the drop down menu.  It can be set to ",(0,r.jsx)(t.code,{children:"null"})," for no skill required or a non-existent skill to make sure no agent can manually select it."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"sort_order"}),": this variable represents the order the activity should appear in the drop down menu, if two items have the same sort_order they will be ordered alphabetically.  This value should be zero or greater."]}),"\n"]}),"\n",(0,r.jsx)(t.h4,{id:"example",children:"example"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-json",children:'{\n"activity_skill_filter": {\n  "enabled": true,\n  "filter_teams_view": true,\n  "rules": {\n    "Available": {\n      "required_skill": null,\n      "sort_order": 0 // will appear first\n    },\n    "Outbound Calls": {\n      "required_skill": "outbound_calls",\n      "sort_order": 1 // will appear second\n    },\n    "Offline": {\n      "required_skill": null,\n      "sort_order": 100 // will appear last\n    }\n  }\n}\n}\n'})}),"\n",(0,r.jsx)(t.h3,{id:"dependencies",children:"dependencies"}),"\n",(0,r.jsx)(t.p,{children:"There are no dependencies for this feature to work."}),"\n",(0,r.jsx)(t.h2,{id:"custom-changes",children:"Custom Changes"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.em,{children:"this section is a placeholder for documentation of any changes performed over and above the original template implementation"})}),"\n",(0,r.jsx)(t.h2,{id:"technical-details",children:"Technical Details"}),"\n",(0,r.jsx)(t.h3,{id:"high-level-implementation",children:"high level implementation"}),"\n",(0,r.jsx)(t.h4,{id:"deriving-the-rules",children:"deriving the rules"}),"\n",(0,r.jsxs)(t.p,{children:["This feature provides a helper class ",(0,r.jsx)(t.code,{children:"AgentActivities"})," that exposes a method that loops through all the possible activities and matches them to the provided rules.  If no rules are provided, then they are assumed to be visible with a sort order of 0 (meaning they will appear at the start, sorted alphabetically)."]}),"\n",(0,r.jsxs)(t.p,{children:["This method is also used to generate an array of a custom object ",(0,r.jsx)(t.code,{children:"ActivityCssConfig"})," that contains an index id, a visible flag and an order flag.  The index is matched to the original order of the activities list."]}),"\n",(0,r.jsx)(t.h4,{id:"mainheader",children:"MainHeader"}),"\n",(0,r.jsxs)(t.p,{children:["A new react component is created called ",(0,r.jsx)(t.code,{children:"ActivityWrapper"})," that is used to wrap around the original ",(0,r.jsx)(t.code,{children:"MainHeader"})," ",(0,r.jsx)(t.a,{href:"https://assets.flex.twilio.com/docs/releases/flex-ui/2.3.3/programmable-components/components/MainHeader/",children:"component"})," and all the new component does is add a div around the MainHeader, the div allows us to inject css that targets the lower level components to override them.  We pass in the array of ",(0,r.jsx)(t.code,{children:"ActivityCssConfig"})," objects we generated earlier and we use the index id to find the Activity buttons on the menu drop down and apply a visibility flag and an order flag."]}),"\n",(0,r.jsx)(t.h4,{id:"workerprofile",children:"WorkerProfile"}),"\n",(0,r.jsxs)(t.p,{children:["A new react component called ",(0,r.jsx)(t.code,{children:"WorkerProfileInfo"})," is created that uses the ",(0,r.jsx)(t.code,{children:"AgentActivities"})," class to generate a list of eligible activities and their order.  It is then used to render this new component that replaces the ",(0,r.jsx)(t.code,{children:"info"})," child component on the ",(0,r.jsx)(t.code,{children:"WorkerProfile"})," ",(0,r.jsx)(t.a,{href:"https://assets.flex.twilio.com/docs/releases/flex-ui/2.3.3/programmable-components/components/WorkerProfile/",children:"component"}),"."]}),"\n",(0,r.jsx)(t.h3,{id:"sequence-diagram",children:"sequence diagram"}),"\n",(0,r.jsx)(t.mermaid,{value:"sequenceDiagram\n    participant MainHeader\n    participant WorkerProfile\n    MainHeader->>MainHeader: render()\n    Note over MainHeader: evaluate order and visibility and inject new ActivityWrapper div using MainHeader.Content.addWrapper()\n    WorkerProfile->>WorkerProfile: render()\n    Note over WorkerProfile: replace WorkerProfileInfo, evaluate order and visibility then render() new Child Component"}),"\n",(0,r.jsx)(t.h3,{id:"flex-hooks",children:"flex hooks"}),"\n",(0,r.jsx)(a.A,{children:(0,r.jsx)(l.A,{value:"component",label:"Component Hooks",default:!0,children:(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Component Hook"}),(0,r.jsx)(t.th,{children:"Component Name"}),(0,r.jsx)(t.th,{children:"Options"}),(0,r.jsx)(t.th,{children:"Related Custom Component"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"addWrapper"}),(0,r.jsx)(t.td,{children:"MainHeader"}),(0,r.jsx)(t.td,{}),(0,r.jsx)(t.td,{children:"ActivityWrapper"}),(0,r.jsx)(t.td,{children:"Wraps MainHeader with a div that injects css, targeting lower level components"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"replace"}),(0,r.jsx)(t.td,{children:"WorkerProfile.info"}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"align: 'start', sortOrder: 2"})}),(0,r.jsx)(t.td,{children:"WorkerProfileInfo"}),(0,r.jsx)(t.td,{children:"replaces info panel on WorkerProfile so activities can be directly controlled so sort and filter based on skills"})]})]})]})})})]})}function m(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(f,{...e})}):f(e)}},61425:(e,t,i)=>{i.d(t,{Ay:()=>l,RM:()=>s});var n=i(74848),r=i(28453);const s=[];function a(e){const t={a:"a",admonition:"admonition",p:"p",...(0,r.R)(),...e.components};return(0,n.jsx)(t.admonition,{title:"Also available in Flex Plugin Library",type:"info",children:(0,n.jsxs)(t.p,{children:["A version of this feature is also available in the ",(0,n.jsx)(t.a,{href:"https://www.twilio.com/docs/flex/developer/plugins/plugin-library",children:"Flex Plugin Library"}),". If you prefer to use the Plugin Library version alongside the template, please ",(0,n.jsx)(t.a,{href:"/developers/building/feature-management/remove-features",children:"remove this feature"})," from your instance of the template to prevent conflicts."]})})}function l(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(a,{...e})}):a(e)}}}]);