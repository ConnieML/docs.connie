"use strict";(self.webpackChunkflex_project_template_docs=self.webpackChunkflex_project_template_docs||[]).push([[3460],{26375:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>a,contentTitle:()=>t,default:()=>h,frontMatter:()=>s,metadata:()=>l,toc:()=>c});const l=JSON.parse('{"id":"developers/building/feature-management/channels/voice/voicemail/voicemail-only-configuration","title":"Configuring Voicemail-Only Lines","description":"This guide explains how to configure a dedicated voicemail-only line using the existing callback-and-voicemail-with-email feature without modifying core functionality.","source":"@site/docs/developers/building/feature-management/channels/voice/voicemail/voicemail-only-configuration.md","sourceDirName":"developers/building/feature-management/channels/voice/voicemail","slug":"/developers/building/feature-management/channels/voice/voicemail/voicemail-only-configuration","permalink":"/developers/building/feature-management/channels/voice/voicemail/voicemail-only-configuration","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_label":"Voicemail-Only Configuration","sidebar_position":3,"title":"Configuring Voicemail-Only Lines"},"sidebar":"developer","previous":{"title":"Monitoring Guide","permalink":"/developers/building/feature-management/channels/voice/voicemail/email-providers/monitoring-guide"},"next":{"title":"Basic Voicemail Setup","permalink":"/developers/building/feature-management/channels/voice/voicemail/basic-voicemail-setup"}}');var o=n(74848),r=n(28453);const s={sidebar_label:"Voicemail-Only Configuration",sidebar_position:3,title:"Configuring Voicemail-Only Lines"},t="Voicemail-Only Line Configuration",a={},c=[{value:"Overview",id:"overview",level:2},{value:"Implementation",id:"implementation",level:2},{value:"Step 1: Studio Flow Configuration",id:"step-1-studio-flow-configuration",level:3},{value:"Step 2: How It Works",id:"step-2-how-it-works",level:3},{value:"Step 3: Testing",id:"step-3-testing",level:3},{value:"Technical Details",id:"technical-details",level:2},{value:"Parameter Flow",id:"parameter-flow",level:3},{value:"Function Behavior",id:"function-behavior",level:3},{value:"Email Configuration",id:"email-configuration",level:3},{value:"Rollback Plan",id:"rollback-plan",level:2},{value:"Option 1: Remove Parameter (Instant)",id:"option-1-remove-parameter-instant",level:3},{value:"Option 2: Restore Original Function",id:"option-2-restore-original-function",level:3},{value:"Multiple Voicemail-Only Lines",id:"multiple-voicemail-only-lines",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Caller Still Gets Hold Options",id:"caller-still-gets-hold-options",level:3},{value:"No Email Sent",id:"no-email-sent",level:3},{value:"Task Not Created",id:"task-not-created",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Example Configuration",id:"example-configuration",level:2}];function d(e){const i={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.header,{children:(0,o.jsx)(i.h1,{id:"voicemail-only-line-configuration",children:"Voicemail-Only Line Configuration"})}),"\n",(0,o.jsxs)(i.p,{children:["This guide explains how to configure a dedicated voicemail-only line using the existing ",(0,o.jsx)(i.code,{children:"callback-and-voicemail-with-email"})," feature without modifying core functionality."]}),"\n",(0,o.jsx)(i.admonition,{title:"Production-Safe Implementation",type:"info",children:(0,o.jsx)(i.p,{children:"This configuration uses a special parameter to enable voicemail-only mode. Without this parameter, the function behaves exactly as before, ensuring zero impact on existing deployments."})}),"\n",(0,o.jsx)(i.h2,{id:"overview",children:"Overview"}),"\n",(0,o.jsx)(i.p,{children:"Some organizations need dedicated voicemail lines that:"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsx)(i.li,{children:"Skip all callback and hold options"}),"\n",(0,o.jsx)(i.li,{children:"Direct callers immediately to voicemail recording"}),"\n",(0,o.jsx)(i.li,{children:"Still create ConnieRTC tasks and send email notifications"}),"\n",(0,o.jsx)(i.li,{children:"Use the same infrastructure as regular lines"}),"\n"]}),"\n",(0,o.jsx)(i.h2,{id:"implementation",children:"Implementation"}),"\n",(0,o.jsx)(i.h3,{id:"step-1-studio-flow-configuration",children:"Step 1: Studio Flow Configuration"}),"\n",(0,o.jsx)(i.p,{children:"In your Studio Flow for the voicemail-only number:"}),"\n",(0,o.jsxs)(i.ol,{children:["\n",(0,o.jsxs)(i.li,{children:["\n",(0,o.jsxs)(i.p,{children:[(0,o.jsx)(i.strong,{children:"Add a Say/Play Widget"})," (optional)"]}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsx)(i.li,{children:'Welcome message: "Thank you for calling [Organization]. Please leave your message after the tone."'}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(i.li,{children:["\n",(0,o.jsx)(i.p,{children:(0,o.jsx)(i.strong,{children:"Configure Send to ConnieRTC Widget"})}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Hold Music TwiML URL"}),": Add the ",(0,o.jsx)(i.code,{children:"voicemailOnly=true"})," parameter"]}),"\n"]}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{children:"https://[YOUR-DOMAIN]/features/callback-and-voicemail-with-email/studio/wait-experience?voicemailOnly=true\n"})}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Workflow"}),": Use the same workflow SID as your regular lines"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Task Channel"}),": voice"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Attributes"}),": Standard attributes"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(i.h3,{id:"step-2-how-it-works",children:"Step 2: How It Works"}),"\n",(0,o.jsxs)(i.p,{children:["When ",(0,o.jsx)(i.code,{children:"voicemailOnly=true"})," is passed:"]}),"\n",(0,o.jsxs)(i.ol,{children:["\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Skips"})," all callback and hold queue logic"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Immediately prompts"})," for voicemail recording"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Creates ConnieRTC task"})," with voicemail attributes"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Sends email"})," to configured admins"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Uses same workflow"})," and routing as regular voicemails"]}),"\n"]}),"\n",(0,o.jsx)(i.h3,{id:"step-3-testing",children:"Step 3: Testing"}),"\n",(0,o.jsxs)(i.ol,{children:["\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Deploy"})," your serverless functions (no code changes needed)"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Update"})," your Studio Flow with the voicemailOnly parameter"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Call"})," the dedicated voicemail number"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Verify"}),":","\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsx)(i.li,{children:"No callback or hold options offered"}),"\n",(0,o.jsx)(i.li,{children:"Direct to voicemail recording"}),"\n",(0,o.jsx)(i.li,{children:"Task appears in ConnieRTC"}),"\n",(0,o.jsx)(i.li,{children:"Email notification sent"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(i.h2,{id:"technical-details",children:"Technical Details"}),"\n",(0,o.jsx)(i.h3,{id:"parameter-flow",children:"Parameter Flow"}),"\n",(0,o.jsxs)(i.p,{children:["The ",(0,o.jsx)(i.code,{children:"voicemailOnly=true"})," parameter is passed through all recording callbacks:"]}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsx)(i.li,{children:"Initial wait experience URL"}),"\n",(0,o.jsx)(i.li,{children:"Recording action URL"}),"\n",(0,o.jsx)(i.li,{children:"Transcription callback URL"}),"\n",(0,o.jsx)(i.li,{children:"Submit voicemail URL"}),"\n"]}),"\n",(0,o.jsx)(i.h3,{id:"function-behavior",children:"Function Behavior"}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-javascript",children:"// In wait-experience.protected.js\nif (voicemailOnly === 'true' && (mode === 'initialize' || mode === undefined)) {\n  // Skip queue lookup and redirect directly to voicemail recording\n  twiml.redirect(`${baseUrl}?mode=record-voicemail&CallSid=${CallSid}&enqueuedTaskSid=${voicemailOnlyTaskSid}&voicemailOnly=true`);\n  return callback(null, twiml);\n}\n"})}),"\n",(0,o.jsx)(i.h3,{id:"email-configuration",children:"Email Configuration"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Same Mailgun setup"})," as regular lines"]}),"\n",(0,o.jsx)(i.li,{children:(0,o.jsx)(i.strong,{children:"Same admin email list"})}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Same email template"})," (shows different originating number)"]}),"\n",(0,o.jsx)(i.li,{children:(0,o.jsx)(i.strong,{children:"No additional configuration needed"})}),"\n"]}),"\n",(0,o.jsx)(i.h2,{id:"rollback-plan",children:"Rollback Plan"}),"\n",(0,o.jsx)(i.p,{children:"If any issues occur:"}),"\n",(0,o.jsx)(i.h3,{id:"option-1-remove-parameter-instant",children:"Option 1: Remove Parameter (Instant)"}),"\n",(0,o.jsxs)(i.ol,{children:["\n",(0,o.jsx)(i.li,{children:"Edit Studio Flow"}),"\n",(0,o.jsxs)(i.li,{children:["Remove ",(0,o.jsx)(i.code,{children:"?voicemailOnly=true"})," from the wait URL"]}),"\n",(0,o.jsx)(i.li,{children:"Save - reverts to normal callback/voicemail behavior"}),"\n"]}),"\n",(0,o.jsx)(i.h3,{id:"option-2-restore-original-function",children:"Option 2: Restore Original Function"}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-bash",children:"# If you backed up the original function\ncp wait-experience.protected.js.backup wait-experience.protected.js\nnpm run deploy\n"})}),"\n",(0,o.jsx)(i.h2,{id:"multiple-voicemail-only-lines",children:"Multiple Voicemail-Only Lines"}),"\n",(0,o.jsx)(i.p,{children:"To add more voicemail-only numbers:"}),"\n",(0,o.jsxs)(i.ol,{children:["\n",(0,o.jsx)(i.li,{children:"Create new Studio Flow for each number"}),"\n",(0,o.jsxs)(i.li,{children:["Add the same ",(0,o.jsx)(i.code,{children:"voicemailOnly=true"})," parameter"]}),"\n",(0,o.jsx)(i.li,{children:"Use the same serverless deployment"}),"\n",(0,o.jsx)(i.li,{children:"All lines share the same email configuration"}),"\n"]}),"\n",(0,o.jsx)(i.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,o.jsx)(i.h3,{id:"caller-still-gets-hold-options",children:"Caller Still Gets Hold Options"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Check"}),": Parameter is exactly ",(0,o.jsx)(i.code,{children:"voicemailOnly=true"})," (case-sensitive)"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Verify"}),": URL includes the parameter after ",(0,o.jsx)(i.code,{children:"?"})]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Confirm"}),": Using correct serverless domain"]}),"\n"]}),"\n",(0,o.jsx)(i.h3,{id:"no-email-sent",children:"No Email Sent"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsx)(i.li,{children:"Same troubleshooting as regular voicemail emails"}),"\n",(0,o.jsx)(i.li,{children:"Check Mailgun logs"}),"\n",(0,o.jsx)(i.li,{children:"Verify environment variables"}),"\n"]}),"\n",(0,o.jsx)(i.h3,{id:"task-not-created",children:"Task Not Created"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsx)(i.li,{children:"Check Twilio Function logs for errors"}),"\n",(0,o.jsx)(i.li,{children:"Verify workflow SID is correct"}),"\n",(0,o.jsx)(i.li,{children:"Ensure TaskRouter workspace is active"}),"\n"]}),"\n",(0,o.jsx)(i.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,o.jsxs)(i.ol,{children:["\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Test thoroughly"})," before deploying to production"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Document"})," which numbers are voicemail-only"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Monitor"})," function logs during initial deployment"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Keep IVR logic"})," in Studio Flow for easy updates"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Use descriptive names"})," for voicemail-only Studio Flows"]}),"\n"]}),"\n",(0,o.jsx)(i.h2,{id:"example-configuration",children:"Example Configuration"}),"\n",(0,o.jsxs)(i.p,{children:[(0,o.jsx)(i.strong,{children:"Phone Number"}),": +1-725-444-5259\n",(0,o.jsx)(i.strong,{children:"Studio Flow"}),': "H2H Voicemail Only Flow"\n',(0,o.jsx)(i.strong,{children:"Wait URL"}),":"]}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{children:"https://custom-flex-extensions-serverless-4044-dev.twil.io/features/callback-and-voicemail-with-email/studio/wait-experience?voicemailOnly=true\n"})}),"\n",(0,o.jsxs)(i.p,{children:[(0,o.jsx)(i.strong,{children:"Result"}),": Callers hear greeting \u2192 record message \u2192 task created \u2192 email sent"]}),"\n",(0,o.jsx)(i.hr,{}),"\n",(0,o.jsx)(i.p,{children:"This configuration allows unlimited voicemail-only lines without code duplication or maintenance overhead."})]})}function h(e={}){const{wrapper:i}={...(0,r.R)(),...e.components};return i?(0,o.jsx)(i,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},28453:(e,i,n)=>{n.d(i,{R:()=>s,x:()=>t});var l=n(96540);const o={},r=l.createContext(o);function s(e){const i=l.useContext(r);return l.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function t(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),l.createElement(r.Provider,{value:i},e.children)}}}]);