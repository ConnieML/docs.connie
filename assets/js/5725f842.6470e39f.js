"use strict";(self.webpackChunkflex_project_template_docs=self.webpackChunkflex_project_template_docs||[]).push([[5804],{1562:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>u,frontMatter:()=>s,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"developers/building/template-utilities/terraform","title":"Terraform","description":"The Terraform solution uses a combination of","source":"@site/docs/developers/building/template-utilities/terraform.md","sourceDirName":"developers/building/template-utilities","slug":"/developers/building/template-utilities/terraform","permalink":"/developers/building/template-utilities/terraform","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Terraform"},"sidebar":"developer","previous":{"title":"Task attribute updates","permalink":"/developers/building/template-utilities/task-attribute-updates"},"next":{"title":"CI deployment","permalink":"/developers/building/deployment/ci-deployment"}}');var n=i(74848),o=i(28453);const s={title:"Terraform"},a=void 0,l={},d=[{value:"Adding resources",id:"adding-resources",level:2}];function c(e){const t={a:"a",code:"code",h2:"h2",li:"li",p:"p",ul:"ul",...(0,o.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.p,{children:"The Terraform solution uses a combination of"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"Twilio Serverless assets to store the Terraform state using an encryption key"}),"\n",(0,n.jsx)(t.li,{children:"Twilio CLI to identify known and critical SIDs that can be injected into the Terraform definition and import existing state"}),"\n",(0,n.jsx)(t.li,{children:"Terraform configuration to manage Studio flows and TaskRouter configuration that the features depend on."}),"\n"]}),"\n",(0,n.jsxs)(t.p,{children:["It uses the ",(0,n.jsx)(t.a,{href:"https://github.com/twilio/terraform-provider-twilio",children:"Twilio Terraform provider"})," which at time of writing does not support data sources."]}),"\n",(0,n.jsx)(t.p,{children:"The main ambition with this setup is to lower the barrier for entry and get development off the ground, the persistence of the Terraform provider can be moved to another storage location as desired. Instructions on that piece still to come."}),"\n",(0,n.jsx)(t.p,{children:"When running the release pipeline it will import and generate the state based on what is on the account but only with relation to resources declared in the configuration. Any resources not in the configuration will be ignored."}),"\n",(0,n.jsx)(t.p,{children:"This solution pushes the configuration and will overwrite anything in your environment with the same name, so please use with care."}),"\n",(0,n.jsx)(t.h2,{id:"adding-resources",children:"Adding resources"}),"\n",(0,n.jsxs)(t.p,{children:["When adding resources in the usual way to the Terraform config, its also necessary to add an associated entry into the action.yaml file in the ",(0,n.jsx)(t.code,{children:"infra-as-code/terraform/environments/default/import_internal_state.sh"})," file that identifies this resource for import. Examples are given for each type of resource. Failure to do so may result in a collision on successive releases."]})]})}function u(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},28453:(e,t,i)=>{i.d(t,{R:()=>s,x:()=>a});var r=i(96540);const n={},o=r.createContext(n);function s(e){const t=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:s(e.components),r.createElement(o.Provider,{value:t},e.children)}}}]);