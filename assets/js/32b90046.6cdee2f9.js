"use strict";(self.webpackChunkflex_project_template_docs=self.webpackChunkflex_project_template_docs||[]).push([[4861],{17094:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/VideoRoom-JS-SDK-Flow-Events-4a7c875983f61c145edd94d3a6a32706.png"},23960:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/customer-video-room-c8d9f4688d9fecffaea7fe5bcd2ebfb1.png"},28453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>l});var t=i(96540);const s={},o=t.createContext(s);function r(e){const n=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),t.createElement(o.Provider,{value:n},e.children)}},30086:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/video-button-5a6a9dadcbb99c338d6dfa859d7de5c4.png"},37751:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/agent-video-room-a58ac77715a6ec5f317fdad6312cde7c.png"},59437:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/join-room-button-d31159096b9ff51b5ae84e27bc1ff510.png"},61460:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"feature-library/chat-to-video-escalation","title":"chat-to-video-escalation","description":"This feature shows how an agent can initiate a video room from a messaging conversation within Flex.","source":"@site/docs/feature-library/chat-to-video-escalation.md","sourceDirName":"feature-library","slug":"/feature-library/chat-to-video-escalation","permalink":"/feature-library/chat-to-video-escalation","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"sidebar_label":"chat-to-video","title":"chat-to-video-escalation"},"sidebar":"tutorialSidebar","previous":{"title":"canned-responses","permalink":"/feature-library/canned-responses"},"next":{"title":"chat-transfer","permalink":"/feature-library/chat-transfer"}}');var s=i(74848),o=i(28453);const r={sidebar_label:"chat-to-video",title:"chat-to-video-escalation"},l=void 0,c={},a=[{value:"Functionality Overview",id:"functionality-overview",level:2},{value:"Feature Structure",id:"feature-structure",level:3},{value:"Technical Components",id:"technical-components",level:3},{value:"Example Walkthrough",id:"example-walkthrough",level:3},{value:"Local Development",id:"local-development",level:2},{value:"Reference",id:"reference",level:2},{value:"Disclaimer",id:"disclaimer",level:2}];function d(e){const n={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"This feature shows how an agent can initiate a video room from a messaging conversation within Flex."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"#functionality-overview",children:"Functionality Overview"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#feature-structure",children:"Feature Structure"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#technical-components",children:"Technical Components"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#example-walkthrough",children:"Example Walkthrough"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#escalating-chat-to-video",children:"Escalating Chat to Video"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#local-development",children:"Local Development"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#changelog",children:"Changelog"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#reference",children:"Reference"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#disclaimer",children:"Disclaimer"})}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"functionality-overview",children:"Functionality Overview"}),"\n",(0,s.jsx)(n.h3,{id:"feature-structure",children:"Feature Structure"}),"\n",(0,s.jsx)(n.p,{children:"This feature is broken down into three main sections:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Flex Plugin"})," - starting at the root of the directory:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["The ",(0,s.jsx)(n.code,{children:"./custom-components"})," folder contains the components to initiate and join the video room"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Twilio Serverless"})," - within the ",(0,s.jsx)(n.code,{children:"/serverless-functions/src/functions/features/chat-to-video-escalation"})," directory:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"This houses the Twilio Function paths which orchestrate the facilitation of access token generation, video room creation, and video room completion"}),"\n",(0,s.jsxs)(n.li,{children:["The assets are utilized to host the build output of the ",(0,s.jsx)(n.a,{href:"https://github.com/twilio-professional-services/flex-project-template/tree/main/web-app-examples/twilio-video-demo-app",children:"video web application"})," that joins the agent and customer into the video session; for further details on how this application works & setup, see the ",(0,s.jsx)(n.a,{href:"https://github.com/twilio-professional-services/flex-project-template/tree/main/web-app-examples/twilio-video-demo-app",children:"application folder"})," within the ",(0,s.jsx)(n.code,{children:"/web-app-examples"})," folder at the root of this template"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Video App"})," - within the ",(0,s.jsx)(n.code,{children:"/web-app-examples/twilio-video-demo-app"})," directory:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"A Next JS application built with React, TypeScript, and Twilio Paste design system"}),"\n",(0,s.jsx)(n.li,{children:"This application is used by the agent (embedded into Flex) and the customer (via invite link) to connect to the video session"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"technical-components",children:"Technical Components"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Twilio Serverless Functions"})," - used to orchestrate the API requests to generate access tokens"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Twilio Serverless Assets"})," - used to host the customer-side video room UI"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Twilio Video JS"})," - used for connecting and monitoring the video rooms on the client side"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"example-walkthrough",children:"Example Walkthrough"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["The video session can only be initiated by the Agent within Flex. Once determined a video session would be appropriate to resolve the customer's use case, the Agent clicks the ",(0,s.jsx)(n.code,{children:"Video Icon"})," button in the ",(0,s.jsx)(n.code,{children:"Task Canvas Header"}),":"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Agent switch to video button",src:i(30086).A+"",width:"536",height:"99"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"After clicking the button, a request is sent to the Twilio function to generate a unique code, which serves as the video room name. Upon success, the unique code and full url to join the video session are returned to the Flex UI, which then auto-sends a message to the conversation with the customer:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Join video message",src:i(67296).A+"",width:"587",height:"1065"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Within the Flex UI, a new tab is visible to the Agent within the ",(0,s.jsx)(n.code,{children:"Task Canvas Tabs"}),", labeled ",(0,s.jsx)(n.code,{children:"Video Room"}),":"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Agent join video room button",src:i(59437).A+"",width:"535",height:"590"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["After clicking ",(0,s.jsx)(n.code,{children:"Join Video Room"}),", the agent is connected to the video room and can interact with the customer:"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Agent in video room",src:i(37751).A+"",width:"857",height:"831"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"On the customer's end, they would click the link included in the message, which would open a new browser tab to join the video room:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Customer join video room button",src:i(72873).A+"",width:"1047",height:"616"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["After clicking ",(0,s.jsx)(n.code,{children:"Join Video Room"}),", the customer will connect to the room and interact with the Agent. The buttons below the video allow the customer to toggle their microphone and camera to on/off, share their screen, and disconnect from the video session:"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Customer in video room",src:i(23960).A+"",width:"1360",height:"719"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Once the video session is complete and the customer disconnects from the room, there is a ",(0,s.jsx)(n.em,{children:"Post Video UI"})," where you could optionally collect a CSAT or feedback:"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Disconnect message",src:i(76494).A+"",width:"578",height:"324"})}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Note:"})," An agent will only be able to participate in one video session at a time. Additionally, the agent will be automatically disconnected from the video session when wrapping up the task."]}),"\n",(0,s.jsx)(n.h2,{id:"local-development",children:"Local Development"}),"\n",(0,s.jsx)(n.p,{children:"To test this feature locally:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Create an ",(0,s.jsx)(n.a,{href:"https://support.twilio.com/hc/en-us/articles/9318455807771-API-Keys-and-How-to-Change-Them",children:"API Key and Secret"})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Ensure the API key and secret are populated in the ",(0,s.jsx)(n.code,{children:".env"})," file within ",(0,s.jsx)(n.code,{children:"<root-folder>/serverless-functions"})," along with the other following variables"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"TWILIO_FLEX_SYNC_SID=ISxxxxxxxxxxxxxxxxxx\n\nTWILIO_API_KEY=<YOUR_API_KEY>\nTWILIO_API_SECRET=<YOUR_API_SECRET>\nVIDEO_CODE_LENGTH=7\nVIDEO_CODE_TTL=60\nVIDEO_ROOM_ALLOW_CREATE=false\nVIDEO_ROOM_TYPE=group\nVIDEO_RECORD_BY_DEFAULT=false\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"reference",children:"Reference"}),"\n",(0,s.jsx)(n.p,{children:"This diagram explains the flow of events within the Video JS SDK:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Video JS SDK flow of events",src:i(17094).A+"",width:"4216",height:"2568"})}),"\n",(0,s.jsx)(n.h2,{id:"disclaimer",children:"Disclaimer"}),"\n",(0,s.jsx)(n.p,{children:'This software is to be considered "sample code", a Type B Deliverable, and is delivered "as-is" to the user. Twilio bears no responsibility to support the use or implementation of this software.'})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},67296:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/join-video-message-b17711be8d8fff0bb2593987aa73ad08.png"},72873:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/customer-video-join-9d42551703e6df9ff2efaf54080adf83.png"},76494:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/post-video-room-80f7513e903baccfaf08c48e8f9d00a6.png"}}]);